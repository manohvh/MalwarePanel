@echo off
set API=http://127.0.0.1:80/api/adduser
set AuthCode=standardAuth

set property=MaxCapacity,MemoryDevices
for %%a in (%property%) do (
	for /F "tokens=* delims=" %%b in ('wmic /node:"%ComputerName%" memphysical get %%a ^| findstr /r "\<[0-9]*[0-9]\>"') do set /a %%a=%%b
)
set /A RAM=%MaxCapacity%/1048576/%MemoryDevices%

for /f %%a in ('powershell Invoke-RestMethod api.ipify.org') do set ExtIP=%%a

curl -X POST -H "Content-Type: application/json" -H "auth: %AuthCode%" -d "{\"ip\": \"%ExtIP%\", \"username\": \"%ComputerName%\", \"pcname\": \"%ComputerName%\", \"ram\": \"%RAM%\"}" %API%